---
title: 文档站点
description: 文档站点介绍和贡献指南
createdAt: 2025-09-11T17:05:55+08:00
lastModified: 2025-09-14T19:54:27+08:00
---

# Afilmory 文档站点

一个使用 Vite、React 和 MDX 构建的现代化文档站点生成器。此包提供了基于文件系统路由的文档站点，具有自动路由生成、语法高亮和响应式设计。

## 功能特性

- **基于文件系统的路由** - 自动从 Markdown 文件生成路由
- **MDX 支持** - 直接在 Markdown 中编写 JSX 组件
- **语法高亮** - 使用 Shiki 高亮显示代码块（支持亮色/暗色主题）
- **静态站点生成** - 构建用于部署的静态 HTML 文件
- **热重载** - 开发期间实时更新
- **响应式设计** - 使用 Tailwind CSS 和 Apple UIKit 颜色构建
- **TypeScript 支持** - 整个代码库的完整类型安全

## 快速开始

### 开发

启动开发服务器：

```bash
pnpm dev
```

这将启动 Vite 开发服务器并监视 `contents/` 目录中的更改。

### 构建

构建生产环境的文档站点：

```bash
pnpm build
```

这将运行三个步骤：
1. `build:client` - 构建客户端 React 应用程序
2. `build:static` - 通过 SSR 生成静态 HTML 文件
3. `output` - 处理并最终确定构建输出

### 预览

在本地预览构建后的站点：

```bash
pnpm preview
```

## 项目结构

```plain
packages/docs/
├── contents/           # 文档内容（MDX/Markdown 文件）
│   ├── index.mdx      # 主页内容
│   ├── getting-started.md
│   └── apps/          # 嵌套文档部分
├── src/
│   ├── components/    # React 组件
│   ├── styles/        # CSS 和样式
│   ├── routes.ts      # 自动生成的路由（请勿编辑）
│   └── App.tsx        # 主应用程序组件
├── plugins/
│   └── route-generater.ts  # 用于路由生成的自定义 Vite 插件
├── public/            # 静态资源
└── scripts/           # 构建脚本
```

## 编写文档

### 基于文件的路由

文档遵循基于文件系统的路由约定：

- `contents/index.mdx` → `/`（主页）
- `contents/getting-started.md` → `/getting-started`
- `contents/apps/index.md` → `/apps`（章节索引）
- `contents/apps/web.md` → `/apps/web`

### MDX 格式

您可以使用带有 JSX 组件的标准 Markdown：

```mdx
---
title: 页面标题
createdAt: 2025-01-20T10:00:00Z
lastModified: 2025-01-20T10:00:00Z
---

# 页面标题

这里是常规的 Markdown 内容。

<div className="bg-blue-100 p-4 rounded">
  自定义 JSX 组件
</div>

```

### 前置元数据

每个文档文件都可以包含前置元数据：

```yaml
---
title: 页面标题          # 用于导航和 SEO
createdAt: 2025-01-20     # 创建日期
lastModified: 2025-01-20  # 最后修改日期
description: 页面描述  # 可选的页面描述
---
```

## 开发指南

### 添加新内容

1. 在 `contents/` 目录中创建新的 `.md` 或 `.mdx` 文件
2. 添加适当的前置元数据
3. 保存后将自动生成路由
4. 开发服务器将热重载您的更改

### 自定义组件

在 `src/components/` 中创建可重用组件，并在 MDX 文件中使用它们：

```typescript
// src/components/InfoBox.tsx
export function InfoBox({ children }: { children: React.ReactNode }) {
  return (
    <div className="bg-blue-50 border border-blue-200 p-4 rounded-lg">
      {children}
    </div>
  );
}
```

```mdx
<!-- 在您的 MDX 文件中 -->
import { InfoBox } from '../src/components/InfoBox';

<InfoBox>
  这是一个自定义信息框组件。
</InfoBox>
```

### 样式

该项目使用：
- **Tailwind CSS** 用于工具优先的样式设计
- 通过 `tailwindcss-uikit-colors` 提供的 **Apple UIKit 颜色**
- 用于散文样式的 **排版插件**
- **自定义滚动条** 样式

使用语义化颜色类：
```css
/* 推荐 */
.text-text-primary .bg-fill-secondary

/* 避免 */
.text-blue-500 .bg-gray-100
```

### 路由生成插件

自定义 Vite 插件自动从文件系统生成路由：

- 监视 `contents/` 目录的更改
- 生成带有路由定义的 `src/routes.ts`
- 创建用于元数据的 `src/routes.json`
- 处理索引文件和嵌套目录

## 配置

### Vite 配置

`vite.config.ts` 中的关键配置：

- 支持前置元数据的 **MDX 处理**
- 使用 Shiki 的 **语法高亮**
- **路由生成** 插件
- **Tailwind CSS** 集成
- 用于开发的 **代码检查器**

### 支持的语言

代码高亮支持：
- JavaScript/TypeScript
- JSX/TSX
- MDX
- JSON
- Shell/Bash

## 部署

`dist/` 中的构建站点可以部署到任何静态托管服务：

- **Vercel** - 零配置部署
- **Netlify** - 拖放 `dist` 文件夹
- **GitHub Pages** - 上传构建产物
- **Cloudflare Pages** - 连接您的仓库

## 脚本参考

- `pnpm dev` - 启动开发服务器
- `pnpm build` - 完整的生产构建
- `pnpm build:client` - 仅构建客户端应用
- `pnpm build:static` - 通过 SSR 生成静态 HTML
- `pnpm output` - 处理构建输出
- `pnpm lint` - 运行 ESLint
- `pnpm preview` - 在本地预览构建的站点

## 贡献指南

为文档做贡献时：

1. 使用 `pnpm create:doc` 并按照说明创建新文档。
2. 编写您的文档。
3. 使用 `pnpm dev` 在本地测试您的更改
4. 确保构建通过 `pnpm build`
5. 使用语义化提交消息